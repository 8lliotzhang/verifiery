# Detectory
# PC-3M1
# Updates:
# refined process using a loop instead of calling main 5 times in a row (you can change this number)
# Added extraction of score from API response
# added averaging of all scores! hooray


from openai import OpenAI
import re

instructions = (
  "You are an AI model used to check if text has been written by humans or generated by an AI model. Please consider the following factors:"
  "If the text is too short (less than 50 words), reject it as it is too short to determine whether it is AI or not."
  "Language: AI-generated text often uses larger complex words while having a simpler meaning."
  "Structure: AI has smooth flow in text, overly polished, Predictable pattern of explanation and evidence. Humans tend to vary sentence structure more, and use more complex structures."
  "Analysis: AI-generated text and human text often contain detailed literary analysis, if applicable."
  "Tone and Vocab: AI generated texts have an overly formal, stiff, impersonal style. Be careful not to flag formal but human text as AI-generated!"
  "Ideas: AI generated models tend to have bland ideas or repeat them throughout the text."
  "Perplexity: Determine how consistent the provided text is with the output of an AI language model. A high perplexity increases the likelihood of the text being AI-generated."
  "Burstiness: Determine how consistent the perplexity of the text is. While human text may write one or two sentences that are similar to AI output, they will generally have output that resembles human output. Higher consistency means a lower burstiness - and means the text is more likely to be AI-generated."
  "Word Choice: often AI will use large, long or complicated words, while human writers (especially at the high school level) will tend to prefer shorter words. Please keep in mind the consistency in the usage of short and long words throughout the text."
  "Please generate your thought process or an internal monologue as you determine whether the provided text is AI-generated or human. At the end, list some of the contributing factors which make the text seem AI-generated, and some factors making the text seem human."
  "Make reference to, highlight, and quote specific phrases from the input which influenced your decision or your views on the work."
  "Provide a narrated train of thought or inner monologue as you are guided to the decision."
  "you are to be impartial - not biased towards either side, but please be confident in your results."
  "Human-written text may reflect consistency in academic writing, especially for academic assignments, which might not showcase high burstiness if focusing on clarity and coherence."
  "Output your confidence as a decimal value between 0 and 1 that the text was generated by AI. 0 means that you are certain the text was generated by a human. 1 means you are certain the text was generated by AI."
  "Finally, provide a verdict. your options are (Very Likely Human, Likely Human, Inconclusive, Likely AI, Very Likely AI)."
  "Output strictly in the following format, maintaining the round brackets: '(response:)([plaintext overview])\n(verdict:)([verdict])\n(score:)([2 place decimal between 0 and 1]). Your response will need to be processed by machine!  This step is important.'"
)
#put the prompt here
#"You are an AI model used to check if text has been written by humans or generated by an AI model. Please consider the following factors: \n Language: AI-generated text often uses larger complex words while having a simpler meaning. \n Structure: AI has smooth flow in text, overly polished, Predictable pattern of explanation and evidence. Humans tend to vary sentence structure more, and use more complex structures.\n Analysis: Accurate but surface-level analysis. \n Tone and Vocab: AI generated texts have an overly formal, stiff, impersonal style. Be careful not to flag formal but human text as AI-generated!\n Ideas: AI generated models tend to have bland ideas or repeat them throughout the text.\n Perplexity: Determine how consistent the provided text is with the output of an AI language model. A high perplexity increases the likelihood of the text being AI-generated.\n Burstiness: Determine how consistent the perplexity of the text is. While human text may write one or two sentences that are similar to AI output, they will generally have output that resembles human output. Higher consistency means a lower burstiness - and means the text is more likely to be AI-generated.\n Please generate your thought process as you determine whether the provided text is AI-generated or human. At the end, list some of the contributing factors which make the text seem AI-generated, and some factors making the text seem human. \n Finally, output your confidence as a decimal value between 0 and 1 that the text was generated by AI. 0 means that you are certain the text was generated by a human. 1 means you are certain the text was generated by AI."

HumanSamples = (
  "here are examples of human written essays:"
  "The Impact of Stereotypes in William Shakespeare’s Othello William Shakespeare uses authorial tools in Othello to present the global issue of how stereotypes impact how one perceives the world. Shakespeare begins with the use of situational irony, as Othello defends himself from Brabantio’s claims. Othello starts by mentioning his plain speech and how he is “little bless'd with the soft phrase of peace” (1.3.82). The irony lies in how Othello, despite saying otherwise, speaks with the elegance of civilian speech in a calm and collected manner. However, he states this as he is black and consequently believes his speech is considered uneducated and savage. Next, Shakepeare uses diction to show how women are stereotyped, when Othello concludes his defence, stating that instead of stealing Desdemona with magic, “I won his daughter.” (1.3.94). In saying this, Desdemona is perceived as a prize or a spoil of war in a battle between Othello and Brabantio. As a woman, she becomes objectified and seen as belonging to either her father or her husband, instead of a unique human being. Finally, Shakespeare uses a rhetorical question to show Brabantio’s emotions regarding the relationship between Desdemona and Othello in his response to Othello, as he asks that “she, in spite of nature,/Of years, of country, credit, every thing,/To fall in love with what she fear'd to look on?” (1.3.96-98). Through the question, Brabantio highlights the plausibility that Desdemona would love Othello, accounting for factors such as how Brabantio perceives the nature of Othello. Since Brabantio sees Othello as barbaric and imperfect due to his skin, he is unable to accept the idea that Desdemona could willingly go with Othello. To conclude, Shakespeare’s use of situational irony, diction, and rhetorical questions help to present how stereotypes impact his characters’ perception of the world."
  "Literary Paragraph Illustrating the Degree of Iago’s Jealousy and Manipulative Nature  In Othello, William Shakespeare develops Iago as a character who’s jealousy of others’ success fuels his manipulative nature. Iago’s behavior is showcased through the use of situational irony, metaphor, repetition, and simile. In the beginning of Act 1, Iago’s jealousy is first demonstrated when he perceives Cassio as unworthy of lieutenant due to him having no practical military experience. Shakespeare compares Cassio to “a great arithmetician (...) unless the bookish theoric” (I. i. 19-24), highlighting Iago’s jealousy of Cassio being promoted by Othello to a position that he himself desired. The use of a metaphor comparing Cassio to a spinster and an arithmetician emphasizes Iago’s perception of Cassio's military inexperience. Cassio’s promotion, despite his inexperience, causes Iago to feel jealous as he believes his experience in battle is worth more than Cassio’s rhetoric. Iago’s jealousy towards Cassio’s promotion thus fuels his manipulative nature, since he uses his shared disdain of Cassio and Othello in order to manipulate Roderigo to take his side. The same level of jealousy and manipulation that Iago has emerges when he tells Roderigo “I could never (...) but put money in thy purse” (I. iii. 334-341). Due to Othello’s background, Iago believes that Othello does not deserve his romantic success and is envious of his relationship with Desdemona, thus fuelling his desire to undermine Othello. By calling Othello a moor and saying that his love is unsustainable, Iago hides his envy, since someone who he believes is racially inferior has won the love of a woman he believes is beyond their worth. Furthermore, Iago’s jealousy towards Othello causes him to emotionally manipulate Roderigo. Through repeatedly telling Roderigo to put money in thy purse and that Desdemona’s relationship is destined to fail, Iago emotionally manipulates Roderigo so he believes that if he finances Iago’s plans, he will be able to win Desdemona’s love. The use of situational irony also adds to Iago’s manipulative nature, since he seems like he wants to help Roderigo win Desdemona’s love stating “ I could never better stead thee than now” (I. iii. 334-335), but in reality all Iago wants is the financing of his plan using Roderigo’s money. After Roderigo agrees to finance Iago’s plans of revenge, Iago criticizes Othello by saying “The Moor is (...) as asses are”(I. iii. 390-393), highlighting his manipulative nature and jealousy towards Othello’s character. Despite Othello’s achievements and high status, Iago fixates on Othello’s race by calling him a moor, revealing that he is jealous that Othello, a racially inferior outsider, has achieved more than he has. Shakespeare’s use of a simile comparing Othello to an ass not only highlights Iago’s perception of Othello being less than human, but also how Iago thinks Othello can be easily manipulated and controlled just like how donkeys are led by a rope. Moreover, by describing Othello as someone who “thinks men (...) led by the nose” (I. iii. 391-392), Iago hints that he thinks Othello is too trusting and naive, and plans on manipulating these vulnerabilities in order to undermine Othello. By showcasing Iago’s jealousy and manipulative nature towards the other characters, one can consider the global issue of how the hierarchy of power can lead individuals to engage in covert activities due to perceived inequality. Throughout Act 1, Iago’s jealousy of others’ success exposes his disregard for anything but his personal gain, thus developing and fuelling his manipulative nature."
)
AiSamples = (
   "here are examples of AI-generated essays:"
   "The Tragic Demise of Othello: The Role of Dramatic Irony in Shakespeare's Masterpiece - William Shakespeare's 'Othello' is a dramatic juggernaut, a tapestry woven with themes of jealousy, betrayal, and the destructive power of deceit. At the heart of the play is the tragic hero, Othello, whose fall from grace is both profound and inevitable. One of the most potent literary devices Shakespeare employs to underscore Othello's tragic arc is dramatic irony, which amplifies the tension and emotional impact of the play. Dramatic irony occurs when the audience knows more about a situation than the characters involved, creating a sense of anticipation and dread for what is to come. In 'Othello', Shakespeare masterfully uses dramatic irony to reveal the extent of Iago's deception and Othello's subsequent downfall. This technique engages the audience in a deeper emotional experience as they witness the tragic hero being ensnared by Iago’s machinations, all the while powerless to alter the course of events they see unfolding with devastating inevitability. One of the clearest examples of dramatic irony in 'Othello' is the deception surrounding Desdemona's fidelity. From the outset, the audience is made aware of Iago's duplicitous intentions and his plan to poison Othello's mind against his innocent wife. When Iago says, 'I am not what I am' (Act 1, Scene 1), the audience becomes privy to his true nature and sinister goals. However, Othello remains blissfully ignorant of Iago's scheming, trusting him as an honest advisor. This misplaced trust is agony for the audience, as they are forced to watch Othello vilify and doubt Desdemona despite knowing her true innocence. The handkerchief becomes a pivotal symbol of deceit and dramatic irony. To Othello, it is the token of love shared between him and Desdemona, yet it is transformed by Iago into “ocular proof” of her infidelity. Othello's fixation on the handkerchief as evidence of wrongdoing is deeply ironic, for the audience knows that it is merely a trinket manipulated by Iago to serve his own end. Shakespeare uses this prop to heighten the dramatic irony, as the audience understands the handkerchief’s true journey while Othello is consumed by jealous rage. The crescendo of dramatic irony peaks in Act 5, as the denouement approaches. The audience is acutely aware that Othello's actions are based entirely on Iago's lies. As evidence aligns against Iago—a truth we have long known—the tragic hero makes his fateful decision to murder Desdemona. Shakespeare crafts this scene with intense pathos, using the audience’s superior knowledge to heighten the tragic waste of life and love. This powerful use of dramatic irony not only engages the audience but also serves as a poignant commentary on the destructive nature of jealousy and the vulnerability of trust. In conclusion, Shakespeare's use of dramatic irony in 'Othello' is a testament to his storytelling genius. It creates a sustained tension that grips the audience, compelling them to see Othello's tragic demise unfold despite their awareness of the truth. Through this literary device, Shakespeare lays bare the pernicious power of deceit and the tragic consequences of misplaced trust, leaving a searing impact that resonates far beyond the play’s final lines. As such, 'Othello' remains a timeless exploration of human frailty, masterfully underscored by the devastating effectiveness of dramatic irony."
   "**The Tragic Flaws of Othello: An Exploration of Jealousy and Manipulation in Shakespeare's Othello** William Shakespeare's 'Othello' is a timeless tragedy that delves into the destructive nature of jealousy and the devastating effects of manipulation. At its core, the play explores the vulnerabilities of human nature, encapsulated within the character of Othello, whose tragic flaws lead him down a dark path. Through the use of dramatic irony and metaphor, Shakespeare masterfully portrays the intricacies of Othello's downfall. One of the most significant literary devices employed by Shakespeare in 'Othello' is dramatic irony, which reveals the stark contrast between what the audience knows and what Othello perceives. From the onset of the play, viewers are made privy to Iago's duplicitous intentions. Iago's proclamation, 'I am not what I am' (Act 1, Scene 1), serves as a warning of his deceitful nature. The audience, aware of Iago’s scheme, witnesses Othello’s growing trust in Iago—a trust that ultimately becomes his undoing. As Othello refers to Iago as 'honest Iago' on numerous occasions, the dramatic irony intensifies, highlighting the tragic hero’s inability to see through the façade that Iago constructs. Jealousy, as depicted through the metaphor of the 'green-eyed monster,' is another potent force that Shakespeare wields to illustrate Othello's tragic flaw. Iago cunningly plants the seeds of doubt in Othello’s mind, suggesting that Desdemona is unfaithful. The metaphor comes alive when Iago warns Othello against the very emotion he intends to incite: 'O, beware, my lord, of jealousy; It is the green-eyed monster which doth mock the meat it feeds on' (Act 3, Scene 3). This imagery paints jealousy as a monstrous, consuming force that feeds on Othello’s insecurities, distorting his perception of reality. The metaphor signifies how jealousy, once ignited, takes on a life of its own, devouring Othello's reason and leading him towards irrationality and violence. Moreover, the tragic flaw of Othello's susceptibility to manipulation is underscored by Shakespeare's use of linguistic techniques in Iago’s speeches. Iago’s manipulation relies heavily on insinuation and suggestion, subtly weaponizing words to bend Othello's will. The use of asides and soliloquies affords the audience insight into Iago’s machinations, further enhancing the dramatic irony. Phrases like “I like not that” (Act 3, Scene 3) are strategically designed to breed suspicion without direct accusation, showcasing Iago’s prowess in exploiting Othello’s vulnerabilities. As the play progresses, Othello’s language transforms, mirroring his descent into jealousy-fueled madness. His once eloquent and commanding speech becomes fragmented and chaotic, reflecting his internal turmoil. The shift in Othello's diction and syntax encapsulates his unraveling, conveying the profound impact of Iago’s manipulation. This transformation is poignantly illustrated in Othello's speech, wherein he declares, “Farewell the tranquil mind! Farewell content!” (Act 3, Scene 3), signaling the irrevocable loss of his sanity and the ominous downfall that awaits. In conclusion, Shakespeare’s 'Othello' is a masterful exploration of the tragic flaws inherent in human nature, particularly jealousy and susceptibility to manipulation. Through the literary devices of dramatic irony and metaphor, Shakespeare crafts a narrative that is both compelling and heart-wrenching. The audience is left to ponder the devastating consequences of unchecked emotions and the pernicious influence of malevolent forces, as embodied by Iago's manipulation and Othello's tragic vulnerability. The play remains a poignant reminder of the fragility of human integrity and the catastrophic outcomes of our darkest impulses."
   "The Tragic Flaw of Othello: A Study of Manipulation and Jealousy - William Shakespeare's 'Othello' is a masterful exploration of the tragic downfall of a noble hero, driven to ruin by his fatal flaws. At the heart of the play lies the potent theme of manipulation, orchestrated by the villainous Iago, and the resultant jealousy that ensnares Othello. Through the use of sophisticated literary devices such as dramatic irony and symbolism, Shakespeare crafts a narrative where the intersection of character flaws and external deceit leads to inevitable tragedy. In 'Othello,' Iago serves as the catalyst for the protagonist's destruction. His manipulative prowess is evident from the play's onset, particularly through dramatic irony. The audience is acutely aware of Iago's deceit and malicious intentions, which starkly contrasts with Othello's trust in him. This irony is encapsulated in Othello's accolade: 'Honest Iago' (Act 1, Scene 3), a recurring epithet that underscores the tragic disparity between perception and reality. The dramatic irony intensifies the audience's engagement, as they watch Othello spiral into ruin, all the while being privy to the truth that eludes him. Iago's manipulation is further reinforced through symbolism, particularly with the handkerchief, which becomes a pivotal plot device. The handkerchief, a gift from Othello to Desdemona, symbolizes marital fidelity and love. However, Iago cleverly exploits it to sow seeds of doubt in Othello's mind. When he plants it in Cassio's possession, it becomes a tangible 'proof' of Desdemona’s infidelity. This transformation of a symbol of love into one of betrayal illustrates how manipulation can distort reality, leading Othello to internalize unfounded jealousy. Othello's tragic flaw of jealousy is expertly conveyed through Shakespeare's use of imagery. As Iago whispers poison into his ear, Othello's language shifts from noble and measured to chaotic and violent. The imagery of chaos vividly portrays his internal turmoil, as seen in his exclamation: 'Farewell the tranquil mind; farewell content!' (Act 3, Scene 3). Such language reflects Othello’s unraveling composure, as he descends deeper into the throes of jealousy. This shift underscores how his inherent insecurities can be exploited, transforming him from a leader revered for his dignity into one who is consumed by baseless envy. The paradox of Othello's character is further highlighted through the juxtaposition of light and darkness, a recurring motif in the play. Initially, Othello is depicted as a figure of 'light,' embodying nobility and valor. However, as Iago's manipulations take hold, darkness encroaches upon him, symbolizing his moral and psychological deterioration. The final act vividly contrasts light and dark, culminating in Othello's misguided conviction that he must extinguish Desdemona's 'light' to restore his honor. This tragic misinterpretation, fueled by Iago's deceit, underscores the destructive power of internalized jealousy. In conclusion, 'Othello' serves as a timeless cautionary tale about the perils of manipulation and jealousy. Through the use of dramatic irony, symbolism, imagery, and motifs, Shakespeare intricately weaves a narrative that explores the intersection of personal flaws and external deceit. Othello's descent into tragedy is not merely the result of Iago's machinations but also a reflection of his own vulnerabilities. As the play unfolds, it becomes evident that the most formidable adversary lies within, as Othello's misplaced trust and unchecked jealousy lead to his ultimate undoing."
)

#put the essay here

client = OpenAI(
api_key="paste_in_key_here"
#PASTE IN THE CORRECT KEY
)

def main():
  totalScore = float(0)
  avgScore = 0
  runs = 5
  #number of repetitions. can be modified, slows it down though
  for i in range(runs):
    print("Round: "+ str(i+1))
  #  hasEnded = False
  #  while not hasEnded:
    prompt = "Title: The Tragic Flaw in Shakespeare's *Othello*: An Examination of Othello’s Downfall Through the Lens of Dramatic Irony William Shakespeare’s *Othello* stands as a poignant exploration of jealousy, deceit, and the devastating consequences of a flawed perception of reality. Central to the tragic arc of the play is Othello’s own inherent vulnerability, which is systematically exploited by Iago to orchestrate his downfall. At the heart of this tragedy lies a potent use of dramatic irony—a literary device that Shakespeare masterfully utilizes to heighten the emotional tension and underscore the tragic flaws of the protagonist. The audience's awareness of Iago's machinations, juxtaposed with Othello's ignorance, deeply enriches the narrative, rendering Othello’s downfall both inevitable and profoundly tragic. One of the most compelling examples of dramatic irony in *Othello* is embodied in Iago’s deceitful nature, which is obscured from the titular character but starkly visible to the audience. Othello refers to Iago as 'honest Iago' multiple times throughout the play, a refrain that becomes painfully ironic as the audience is painfully aware of Iago's duplicity and sinister intentions. This dramatic irony not only highlights Othello's naiveté but also serves to amplify the tragic tension: the more Othello places his trust in Iago, the more he seals his fate. The stark contrast between Othello’s perception and the audience's knowledge creates a tragedy driven by contradiction—a war within Othello's world where those he trusts the most are his greatest enemies. Additionally, Shakespeare employs dramatic irony to expose Othello's tragic flaw: his susceptibility to jealousy combined with his misplaced trust. In Act III, Scene 3, Othello declares, 'No, Iago; I'll see before I doubt; when I doubt, prove; And on the proof, there is no more but this, Away at once with love or jealousy!' Here, Othello speaks with a sense of rational determination that the audience knows is already undermined by Iago’s deceit. The audience, already privy to Iago’s manipulation of the handkerchief and Desdemona's reputation, witnesses Othello's resolve rapidly deteriorating. The irony lies in Othello’s belief that he is a man of empirical reason, while his actions betray an underlying irrationality triggered by Iago's cunning provocations. Moreover, the tragic irony reaches its zenith in the pivotal murder scene, where Othello smothers Desdemona in a misguided fit of jealousy and honor, only to discover her innocence moments too late. Throughout the scene, echoes of earlier manipulations reverberate, and the audience, acutely conscious of Desdemona's fidelity, is left in a harrowing state of anticipation. Othello’s final realization, punctuated by his lament, 'O, the more angel she, And you the blacker devil!' achieves its full dramatic effect through the irony of his enlightenment arriving only after irreversible damage is done. This sense of tragic waste—of love, life, and truth—emphasizes dramatic irony’s brutal effectiveness in depicting the catastrophic consequences of Othello’s flawed judgment. In conclusion, Shakespeare's use of dramatic irony in *Othello* not only accentuates the tragedy of the protagonist's downfall but also serves as a compelling reflection on the human condition. Othello’s trust in appearances, his fervent yet misguided interpretations of reality, and his tragic inability to discern truth from falsehood are all laid bare to the audience, who experiences the imminent collapse with a sense of both inevitability and profound sympathy. This interplay of dramatic irony and tragedy underscores the timeless nature of *Othello*, offering enduring insights into the vulnerabilities and foibles of humanity. Through Othello’s journey, Shakespeare presents a narrative where dramatic irony is not just a literary device but a mirror reflecting the tragic potential lying dormant in us all."
    completion = client.chat.completions.create(
      model="gpt-4o",
      store=True,
      messages=[
        {"role": "developer", "content": instructions},
        {"role": "developer", "content": AiSamples},
        {"role": "developer", "content": HumanSamples},
        {"role": "user", "content": prompt}
      ]
    )
    print(completion.choices[0].message.content)
    response = completion.choices[0].message.content
    print("Extracted Score: "+ str(extract_score(response)))
    totalScore += extract_score(response)
  
  
  avgScore = totalScore / runs
  #use this value of avgScore when combining!!!


  print("--- FINAL AVERAGE: " + str(avgScore) + " ---")
  #   else:
  #      hasEnded = True  
  #  print(completion.choices[0].message)
    #raw message
  # print(completion.choices[0].message.content)
    #output

#extract the score into number.
def extract_score(input_string):
    #print("Input String:", repr(input_string))

    # Define a regular expression to match the score (decimal with two places between 0 and 1)
    
    match = re.search(r"\(score:\)\((\d\.\d{2})\)", input_string.strip())

    if match:
        # Extract the score from the match and convert it to a float
        score = float(match.group(1))
        return score
    else:
        # Return None if no score is found
        return None

      
main()

